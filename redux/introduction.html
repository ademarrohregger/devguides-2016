<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="viewport" content="width=device-width"><link rel="stylesheet" href="../assets/style.css"><title>Introduction - Redux</title></head><body><div class="book-nav"><div class="nav-button"></div></div><div class="chapter-nav"><a href=".">Redux</a><span>Introduction</span></div><div id="body" class="markdown-body -literate"><div class="page-section"><div class="container"><h5 class="chapter-prelude"><strong>Pocket Guides / </strong><a href=".">Redux</a></h5><h1 id="redux">Redux</h1>
<p><a href="http://redux.js.org/">Redux</a> is used to manage data in a React application. Using redux means you create a <em>store</em> that a React app listens to.</p>
<pre><code class="language-js"><span class="hljs-keyword">import</span> { createStore } <span class="hljs-keyword">from</span> <span class="hljs-string">'redux'</span>

<span class="hljs-keyword">var</span> store = createStore(<span class="hljs-ellipsis"></span>)
</code></pre>
<blockquote class="up-next">
<p>What's a store? <a href="#stores">Next</a></p>
</blockquote>
</div></div><div class="page-section"><div class="container">
<h1 id="stores">Stores</h1>
<p>Think of a store as a bunch of data. In fact, you may have already done this: the example here is a plain JS object that stores data.</p>
<pre><code class="language-js"><span class="hljs-keyword">var</span> album = {
  title: <span class="hljs-string">'Kind of Blue'</span>,
  artist: <span class="hljs-string">'Miles Davis'</span>
  year: <span class="hljs-number">1959</span>
}
</code></pre>
<hr>
<p>You can read and write data into a plain JS object. You can do the same in Redux, but just a little differently.</p>
<pre><code class="language-js"><span class="hljs-built_in">console</span>.log(album.title)  <span class="hljs-comment">// &lt;-- Reading</span>
album.genre = <span class="hljs-string">'Jazz'</span>      <span class="hljs-comment">// &lt;-- Writing</span>
</code></pre>
<blockquote class="up-next">
<p>How would you do that in Redux? <a href="#our-first-store">Next</a></p>
</blockquote>
</div></div><div class="page-section"><div class="container">
<h1 id="our-first-store">Our first store</h1>
<p>Stores are created using <code>createStore()</code>.</p>
<pre><code class="language-js"><span class="hljs-line -mute"><span class="hljs-keyword">import</span> { createStore } <span class="hljs-keyword">from</span> <span class="hljs-string">'redux'</span> </span>

<span class="hljs-keyword">var</span> reducer = <span class="hljs-ellipsis"></span>
<span class="hljs-keyword">var</span> store = <span class="hljs-highlight">createStore(reducer, album)</span>
</code></pre>
<hr>
<p>You can read from a store by checking its <em>state</em> using <code>getState()</code>.
Writing data works a bit different, though. That's where <code>reducer</code> comes in.</p>
<pre><code class="language-js"><span class="hljs-keyword">var</span> state = <span class="hljs-highlight">store.getState()</span>
<span class="hljs-built_in">console</span>.log(state.title)<span class="hljs-hr"></span>
<span class="hljs-result">'Kind of Blue'</span>
</code></pre>
<blockquote class="see-also">
<p><span>Also see:</span> <a href="http://redux.js.org/docs/basics/Actions.html">createStore docs</a></p>
</blockquote>
<blockquote class="up-next">
<p>How do you write to a store? <a href="#updating-the-store">Next</a></p>
</blockquote>
</div></div><div class="page-section"><div class="container">
<h1 id="updating-the-store">Updating the store</h1>
<p>You can't change the store's state from outside the store. To do that, you'll need to create actions. Actions are made through <em>reducer functions</em>, which is used by <code>createStore()</code>.</p>
<pre><code class="language-js"><span class="hljs-line -mute"><span class="hljs-keyword">import</span> { createStore } <span class="hljs-keyword">from</span> <span class="hljs-string">'redux'</span> </span>

<span class="hljs-keyword">var</span> store = createStore(<span class="hljs-highlight">reducer</span>, article)<span class="hljs-hr"></span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">reducer</span> (<span class="hljs-params">state, action</span>) </span>{
  <span class="hljs-keyword">if</span> (action.type === <span class="hljs-string">'PUBLISH'</span>) {
    <span class="hljs-keyword">return</span> { ...state, published: <span class="hljs-literal">true</span> }
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-keyword">return</span> state
  }
}
</code></pre>
<p>Reducers take the current state and return a new one. How it changes the store depends on <code>action</code>.</p>
<hr>
<p>To run an action, use <code>dispatch()</code>. This changes the store's <em>state</em>.</p>
<pre><code class="language-js">store.getState().published        <span class="hljs-result">false</span><span class="hljs-hr"></span>
<span class="hljs-highlight">store.dispatch({ type: <span class="hljs-string">'PUBLISH'</span> })</span>
store.getState().published        <span class="hljs-result">true</span>
</code></pre>
<!--
var store = createStore(reducer)

store.dispatch({ type: 'SET', value: 10 })
console.log(store.getState())

store.dispatch({ type: 'ADD', value: 3 })
console.log(store.getState())

function reducer (state, action) {
  switch (action.type) {
    case 'SET':
      return action.value
    case 'ADD':
      return state + action.value
    default:
      return state
  }
}
-->
<blockquote class="see-also">
<p><span>Also see:</span> <a href="http://redux.js.org/docs/basics/Reducers.html">Reducer docs</a></p>
</blockquote>
<blockquote class="up-next">
<p>What does <code>...state</code> mean? <a href="#spread-operator">Next</a></p>
</blockquote>
</div></div><div class="page-section"><div class="container">
<h1 id="the-spread-operator">The spread operator</h1>
<p>The <code>...</code> symbol is the <em>object spread operator</em>. It's available in Babel and in the 2017 version of JavaScript.
These two are roughly equivalent.</p>
<pre><code class="language-js"><span class="hljs-keyword">return</span> { <span class="hljs-highlight">...state</span>, published: <span class="hljs-literal">true</span> }<span class="hljs-hr"></span>
<span class="hljs-keyword">return</span> {
  <span class="hljs-highlight">title: state.title,</span>
  <span class="hljs-highlight">body: state.body,</span>
  published: <span class="hljs-literal">true</span>
}
</code></pre>
<blockquote>
<p>The contents of <code>state</code> is rolled out in place of <code>...state</code>.</p>
</blockquote>
<!--
var state = { name: 'John', age: 3 }
inspect({ ...state, published: true })
-->
<blockquote class="see-also">
<p><span>Also see:</span> <a href="http://redux.js.org/docs/recipes/UsingObjectSpreadOperator.html">Object spread docs</a></p>
</blockquote>
<blockquote class="up-next">
<p>Let's learn more about actions. <a href="#dispatching-actions">Next</a></p>
</blockquote>
</div></div><div class="page-section"><div class="container">
<h1 id="dispatching-actions">Dispatching actions</h1>
<p>The only way to change the store's state is by dispatching actions. You can then easily make a log of what actions have happened, or even undo them.</p>
<pre><code class="language-js">store.dispatch({ type: <span class="hljs-string">'UPDATE'</span>, title: <span class="hljs-string">'Global Warming 101'</span> })
store.dispatch({ type: <span class="hljs-string">'PUBLISH'</span> })
store.dispatch({ type: <span class="hljs-string">'ADD_COMMENT'</span>, text: <span class="hljs-string">'I agree!'</span> })
</code></pre>
<hr>
<p>You can also listen for changes in the store using <code>subscribe()</code>.</p>
<pre><code class="language-js">store.subscribe(() =&gt; {
  <span class="hljs-ellipsis"></span>
})
</code></pre>
<!--
var store = createStore(reducer)

store.subscribe(() => {
  inspect(store.getState())
})

store.dispatch({ type: 'SET', value: 10 })
store.dispatch({ type: 'ADD', value: 3 })

function reducer (state, action) {
  switch (action.type) {
    case 'SET':
      return action.value
    case 'ADD':
      return state + action.value
    default:
      return state
  }
}
-->
<blockquote class="up-next">
<p>Let's recap what we've learned. <a href="#recap">Next</a></p>
</blockquote>
</div></div><div class="page-section"><div class="container">
<h1 id="recap">Recap</h1>
<p><strong>Stores</strong> are made from reducer functions.</p>
<pre><code class="language-js"><span class="hljs-line -mute"><span class="hljs-keyword">import</span> { createStore } <span class="hljs-keyword">from</span> <span class="hljs-string">'redux'</span> </span>
store = createStore(reducer, {<span class="hljs-placeholder">initial state</span>})
</code></pre>
<hr>
<p><strong>Actions</strong> are dispatched to the reducer.</p>
<pre><code class="language-js">store.dispatch(<span class="hljs-highlight">{ type: <span class="hljs-string">'PUBLISH'</span> }</span>)
</code></pre>
<hr>
<p><strong>Reducers</strong> tell us how to change a <code>state</code> based on an <code>action</code>.</p>
<pre><code class="language-js"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">reducer</span> (<span class="hljs-params">state, action</span>) </span>{
  <span class="hljs-keyword">if</span> <span class="hljs-highlight">(action.type === <span class="hljs-string">'PUBLISH'</span>)</span> {
    <span class="hljs-keyword">return</span> { ...state, published: <span class="hljs-literal">true</span> }
  }
  <span class="hljs-keyword">return</span> state
}
</code></pre>
<hr>
<p><strong>States:</strong> the store keeps a state, and you can listen for updates using <code>subscribe()</code>.</p>
<pre><code class="language-js"><span class="hljs-highlight">store.getState()</span>.published
store.subscribe(() =&gt; { <span class="hljs-ellipsis"></span> })
</code></pre>
<blockquote class="up-next">
<p>Let's learn more about actions. <a href="actions.html">Next</a></p>
</blockquote>
</div></div></div><script src="../assets/script.js"></script></body></html>