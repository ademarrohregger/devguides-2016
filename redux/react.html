<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="viewport" content="width=device-width"><link rel="stylesheet" href="../assets/style.css"><title>Using with React - Redux</title></head><body class="-chapter"><div class="book-nav"><div class="nav-button"></div></div><div class="chapter-nav"><a href=".">Redux</a><span>Using with React</span></div><div id="body" class="markdown-body -literate"><div class="page-section"><div class="container"><h5 class="chapter-prelude"><a href="/" class="root">devguides.io</a><span> / </span><a href="." class="book">Redux</a></h5><h1 id="using-with-react">Using with React</h1>
<p><strong>react-redux</strong> is the official package used to make Redux and React work together. To use it, wrap your main app (your top-most React component) inside a <code>&lt;Provider&gt;</code>. This lets your components see the <code>store</code>.</p>
<pre><code class="language-js"><span class="hljs-line -mute"><span class="hljs-keyword">import</span> React <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span> </span><span class="hljs-line -mute"><span class="hljs-keyword">import</span> { render } <span class="hljs-keyword">from</span> <span class="hljs-string">'react-dom'</span> </span><span class="hljs-line -mute"><span class="hljs-keyword">import</span> { createStore } <span class="hljs-keyword">from</span> <span class="hljs-string">'redux'</span> </span>
<span class="hljs-keyword">import</span> { <span class="hljs-highlight">Provider</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'react-redux'</span>

<span class="hljs-keyword">let</span> store = createStore(todoApp)

render(
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Provider</span> <span class="hljs-attr">store</span>=<span class="hljs-string">{store}</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">App</span> /&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">Provider</span>&gt;</span></span>,
  <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">'root'</span>))
</code></pre>
<blockquote class="see-also">
<p><span>Also see:</span> <a href="http://redux.js.org/docs/basics/UsageWithReact.html">Usage with React</a></p>
</blockquote>
<!-- -->
<blockquote class="up-next">
<p>How do I see the state in my components? <a href="#connecting">Next</a></p>
</blockquote>
</div></div><div class="page-section"><div class="container">
<h1 id="connecting-to-the-store">Connecting to the store</h1>
<p>react-redux provides <code>connect()</code> to let components see the store's state.</p>
<pre><code class="language-js"><span class="hljs-keyword">import</span> { connect } <span class="hljs-keyword">from</span> <span class="hljs-string">'redux'</span>

PhotosList = React.createClass({ <span class="hljs-ellipsis"></span> })
PhotosList = <span class="hljs-highlight">connect(mapState)</span>(PhotosList)
</code></pre>
<hr>
<p>What's <code>mapState</code>? It takes the <code>state</code> and returns props to be used by the component. Write this function and pass it to <em>connect()</em>.</p>
<pre><code class="language-js"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">mapState</span> (<span class="hljs-params">state</span>) </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-highlight">{ photos: state.photos }</span>
}
</code></pre>
<hr>
<p>You can use the props you made in <em>mapState()</em> inside your component as <code>this.props</code>.</p>
<pre><code class="language-js"><span class="hljs-keyword">var</span> PhotosList = React.createClass({
  render () {
    <span class="hljs-keyword">let</span> photos = <span class="hljs-highlight"><span class="hljs-keyword">this</span>.props.photos</span>
    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>{photos.map(<span class="hljs-ellipsis"></span>)}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  }
})
</code></pre>
<blockquote class="up-next">
<p>What about dispatching events? <a href="#dispatching">Next</a></p>
</blockquote>
</div></div><div class="page-section"><div class="container">
<h1 id="dispatching">Dispatching</h1>
<p><code>connect()</code> also lets you send <em>props</em> to your Components that map to dispatch calls. The 2nd argument of <code>connect()</code> lets you do this.</p>
<pre><code class="language-js"><span class="hljs-keyword">var</span> PhotosList = connect(mapState, <span class="hljs-highlight">mapDispatch</span>)(PhotosList)
</code></pre>
<hr>
<p>Provide it a function that returns properties to be added to your component. These properties are functions that you can call later on.</p>
<pre><code class="language-js"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">mapDispatch</span> (<span class="hljs-params">dispatch</span>) </span>{
  <span class="hljs-keyword">return</span> {
    onPublishClick: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
      dispatch({ type: <span class="hljs-string">'PUBLISH'</span> })
    }
  }
}
</code></pre>
<hr>
<p>These properties will be available in <code>props</code> in your component. You can then call them on certain events like <em>onClick</em>.</p>
<pre><code class="language-js">&lt;button onClick={() =&gt; <span class="hljs-keyword">this</span>.props.onPublishClick()}&gt;
</code></pre>
<blockquote class="up-next">
<p>Let's recap what we've learned. <a href="#recap">Next</a></p>
</blockquote>
</div></div><div class="page-section"><div class="container">
<h1 id="recap">Recap</h1>
<p><strong>react-redux</strong> lets you make Redux and React work together. <code>Provider</code> makes React components aware of a store.</p>
<pre><code class="language-js"><span class="hljs-line -mute"><span class="hljs-keyword">import</span> { Provider } <span class="hljs-keyword">from</span> <span class="hljs-string">'react-redux'</span> </span>

render(
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Provider</span> <span class="hljs-attr">store</span>=<span class="hljs-string">{store}</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">App</span> /&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">Provider</span>&gt;</span></span>,
  <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">'root'</span>))
</code></pre>
<hr>
<p><code>connect()</code> lets components communicate with a store.</p>
<pre><code class="language-js"><span class="hljs-line -mute"><span class="hljs-keyword">import</span> { connect } <span class="hljs-keyword">from</span> <span class="hljs-string">'react-redux'</span> </span>

MyComponent = <span class="hljs-highlight">connect(mapState, mapDispatch)</span>(MyComponent)
</code></pre>
<hr>
<p><code>mapState</code> should return props as taken from the state tree.</p>
<pre><code class="language-js"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">mapState</span> (<span class="hljs-params">state</span>) </span>{
  <span class="hljs-keyword">return</span> { <span class="hljs-highlight">photos</span>: state.photos }
}
</code></pre>
<hr>
<p><code>mapDispatch</code> should return props that have functions to dispatch actions.</p>
<pre><code class="language-js"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">mapDispatch</span> (<span class="hljs-params">dispatch</span>) </span>{
  <span class="hljs-keyword">return</span> {
    <span class="hljs-highlight">onPublishClick</span>: () =&gt; {
      dispatch({ type: <span class="hljs-string">'PUBLISH'</span> })
    }
  }
}
</code></pre>
<hr>
<p>These props are available in your components as <code>this.props</code>.</p>
<pre><code class="language-js">&lt;h1&gt;{this.props.photos.map(<span class="hljs-ellipsis"></span>)}&lt;/h1&gt;
&lt;button onClick={() =&gt; this.props.onPublishClick()}&gt;
</code></pre>
<blockquote class="up-next">
<p>Let's enhance your store with middleware. <a href="middleware">Next</a></p>
</blockquote>
</div></div></div><script src="../assets/script.js"></script><script>if (window.location.hostname.indexOf('devguides.io') > -1) {
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga')
  ga('create', 'UA-79044901-1', 'auto')
  ga('send', 'pageview')
}</script></body></html>